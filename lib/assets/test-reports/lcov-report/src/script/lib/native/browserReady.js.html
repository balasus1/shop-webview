<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/script/lib/native/browserReady.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../../index.html">All files</a> / <a href="index.html">src/script/lib/native</a> browserReady.js
    </h1>
    <div class='clearfix'>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">//<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ></span></span>
// Fire a callback when the browser environment is "ready"
// 
export default function browserReady(callback) {
  /*   Though isIOS function does return right value for ipad pro, below boolean 
        evaluation is a pessimistic check. 
  */<span class="fstat-no" title="function not covered" ></span>
  const iPadPro = /Macintosh/.test(navigator.userAgent) &amp;&amp; 'ontouchend' in document;
<span class="cstat-no" title="statement not covered" ></span>
  let iOSBridgeReady = <span class="cstat-no" title="statement not covered" >false;</span>
  let documentReady = <span class="cstat-no" title="statement not covered" >false;</span>
  
  const startApp = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(c</span>b) =&gt; {</span>
<span class="cstat-no" title="statement not covered" >    console.log('----&gt;Application Starting');</span>
    // Ensure the iOS JSContext is ready if we're on an iOS device :-\
<span class="cstat-no" title="statement not covered" >    if ((isIOS || iPadPro) &amp;&amp; (!iOSBridgeReady || !documentReady)) {</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
    }
<span class="cstat-no" title="statement not covered" >    console.log("----&gt; dispatching WEBVIEW_READY event");</span>
<span class="cstat-no" title="statement not covered" >    cb();</span>
  }
&nbsp;
  // iOS native code will call this when the JS bridge is set up
<span class="cstat-no" title="statement not covered" >  window.onJSContextReady = <span class="fstat-no" title="function not covered" >fu</span>nction() {</span>
<span class="cstat-no" title="statement not covered" >    console.log('==&gt; iOS: JS Context Ready');</span>
<span class="cstat-no" title="statement not covered" >    iOSBridgeReady = true;</span>
<span class="cstat-no" title="statement not covered" >    startApp(callback);</span>
  };
&nbsp;
  // Make sure the browser is ready as well (all operating systems)
<span class="cstat-no" title="statement not covered" >  document.addEventListener('DOMContentLoaded', <span class="fstat-no" title="function not covered" >()</span> =&gt; {</span>
<span class="cstat-no" title="statement not covered" >    console.log('==&gt; Document Ready');</span>
<span class="cstat-no" title="statement not covered" >    documentReady = true;</span>
<span class="cstat-no" title="statement not covered" >    startApp(callback);</span>
&nbsp;
    // Allow iOS debugging on desktop
<span class="cstat-no" title="statement not covered" >    if (isIOS || iPadPro) {</span>
<span class="cstat-no" title="statement not covered" >      window.onJSContextReady();</span>
    }
  }, false);
&nbsp;
  function <span class="fstat-no" title="function not covered" >isIOS(</span>) {
<span class="cstat-no" title="statement not covered" >    if (/iPad|iPhone|iPod|OS X/.test(navigator.platform)) {</span>
<span class="cstat-no" title="statement not covered" >      return true;</span>
    } else {
<span class="cstat-no" title="statement not covered" >      return navigator.maxTouchPoints &amp;&amp;</span>
        navigator.maxTouchPoints &gt; 2 &amp;&amp;
        /MacIntel/.test(navigator.platform);
    }
  }
&nbsp;
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Mon Dec 18 2023 16:27:02 GMT+0530 (India Standard Time)
</div>
</div>
<script src="../../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../../sorter.js"></script>
</body>
</html>
